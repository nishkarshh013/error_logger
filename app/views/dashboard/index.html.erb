<%= turbo_frame_tag "app_selector" do %>
  <%= select_tag :app_id, options_from_collection_for_select(current_user.apps, :id, :name, params[:app_id]), prompt: "Select an App" %>
<% end %>


<%= turbo_frame_tag "error_panel" do %>
  <table class="dashboard-table">
    <thead>
      <tr>
        <th>Class</th>
        <th>Error First Generated At</th>
        <th>Error Last Generated At</th>
        <th>Message</th>
        <th>Env</th>
      </tr>
    </thead>
    <tbody>
      <% @errors.each do |error| %>
        <tr>
          <td>
            <%= link_to error.error_class, error_path(error), data: { turbo_frame: "error_panel" } %>
          </td>
          <td><%= error.created_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
          <td><%= error.latest_occurrence_updated_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
          <td><%= truncate(error.message, length: 120) %></td>
          <td><%= error.environment %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
